<!DOCTYPE html>
<html>
<head>
    <title>Test Audio Simple</title>
</head>
<body>
    <h1>üîä Test Audio Surveillance</h1>
    
    <button onclick="playBeep1()">üîµ Beep Simple</button>
    <button onclick="playBeep2()">üü° Beep Moyen</button>
    <button onclick="playBeep3()">üü† Beep Fort</button>
    <button onclick="showNotification()">üîî Notification</button>
    
    <br><br>
    <div id="status"></div>
    
    <script>
        function log(message) {
            document.getElementById('status').innerHTML += message + '<br>';
            console.log(message);
        }
        
        function playBeep1() {
            log('üîµ Test beep simple...');
            try {
                const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioCtx.createOscillator();
                const gainNode = audioCtx.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioCtx.destination);
                
                oscillator.frequency.setValueAtTime(440, audioCtx.currentTime);
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
                
                oscillator.start();
                oscillator.stop(audioCtx.currentTime + 0.5);
                
                log('‚úÖ Son 440Hz jou√© avec succ√®s');
            } catch(e) {
                log('‚ùå Erreur: ' + e.message);
            }
        }
        
        function playBeep2() {
            log('üü° Test beep moyen...');
            try {
                const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioCtx.createOscillator();
                const gainNode = audioCtx.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioCtx.destination);
                
                oscillator.frequency.setValueAtTime(660, audioCtx.currentTime);
                oscillator.type = 'square';
                
                gainNode.gain.setValueAtTime(0.4, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.7);
                
                oscillator.start();
                oscillator.stop(audioCtx.currentTime + 0.7);
                
                log('‚úÖ Son 660Hz jou√© avec succ√®s');
            } catch(e) {
                log('‚ùå Erreur: ' + e.message);
            }
        }
        
        function playBeep3() {
            log('üü† Test beep fort...');
            try {
                const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioCtx.createOscillator();
                const gainNode = audioCtx.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioCtx.destination);
                
                oscillator.frequency.setValueAtTime(880, audioCtx.currentTime);
                oscillator.type = 'sawtooth';
                
                gainNode.gain.setValueAtTime(0.5, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 1.0);
                
                oscillator.start();
                oscillator.stop(audioCtx.currentTime + 1.0);
                
                log('‚úÖ Son 880Hz jou√© avec succ√®s');
            } catch(e) {
                log('‚ùå Erreur: ' + e.message);
            }
        }
        
        function showNotification() {
            log('üîî Test notification...');
            if ('Notification' in window) {
                if (Notification.permission === 'granted') {
                    new Notification('üö® Test Surveillance!', {
                        body: 'Le syst√®me d\'alerte fonctionne',
                        icon: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y=".9em" font-size="90">üö®</text></svg>'
                    });
                    log('‚úÖ Notification affich√©e');
                } else if (Notification.permission !== 'denied') {
                    Notification.requestPermission().then(permission => {
                        if (permission === 'granted') {
                            new Notification('üö® Notifications activ√©es!');
                            log('‚úÖ Permission accord√©e, notification affich√©e');
                        } else {
                            log('‚ùå Permission refus√©e');
                        }
                    });
                } else {
                    log('‚ùå Notifications bloqu√©es par l\'utilisateur');
                }
            } else {
                log('‚ùå Notifications non support√©es par ce navigateur');
            }
        }
        
        // Test automatique au chargement
        window.onload = function() {
            log('üì± Page charg√©e, pr√™t pour les tests audio');
            log('üîä Cliquez sur les boutons pour tester les sons');
            log('üí° Si √ßa ne marche pas, v√©rifiez le volume de votre ordinateur');
        }
    </script>
</body>
</html>